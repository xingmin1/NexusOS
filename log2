[Info] [test] Forwarded QEMU guest port: 52150->22; 47037->8080 27800->6379 56847->5201 32955->31234 22718->31236 33373->11211
We use QEMU direct boot for testing, which does not support OVMF, ignoring OVMF
boot_info = BootInfo { bootloader_name: "unknown", kernel_cmdline: "", initramfs: None, framebuffer_arg: None, memory_regions: [MemoryRegion { base: 2147483648, len: 7955048, typ: Kernel }, MemoryRegion { base: 2155438696, len: 797351320, typ: Usable }] }
[INFO] [ostd::tracer] KernelTracer initialized (max_level: trace). Per-CPU indent, no_alloc, no_unsafe in tracer.
INFO: Found usable region, start:80796268, end:b0000000
INFO: Initializing frame metadata for physical memory up to b0000000
INFO: Initializing the kernel page table
[PLIC] LoongArch: cores=1, platic=0x10000000, groups=4
INFO: Found 1 processors.
INFO: Booting all application processors (except BSP 0)...
INFO: Only one processor found (BSP 0), no APs to bring up.
INFO: Waiting for all APs to start...
INFO: All APs confirmed started.
INFO: All application processors started. The BSP continues to run.
INFO: clock = "<unnamed mystery clock>", clock_max_duration = 42.94967295s, initializing kernel runtime...
INFO: kernel runtime initialized
INFO: Initializing VirtIO bus (DT based)
INFO: virtio-mmio devices: 0
DEBUG:   BAR1: allocated 0x1000 bytes at 0x40000000
DEBUG:   BAR4: allocated 0x4000 bytes at 0x40004000 (64-bit)
DEBUG: Device features: BlkFeature(SEG_MAX | GEOMETRY | BLK_SIZE | FLUSH | TOPOLOGY | CONFIG_WCE | DISCARD | WRITE_ZEROES | RING_INDIRECT_DESC | RING_EVENT_IDX | VERSION_1)
INFO: found a block device of size 4194304KB
INFO: VirtIOBlk::new: capacity=8388608
[INFO] [ostd::bus::device_manager] registered device: virtio-blk (idx 0)
DEBUG:   BAR1: allocated 0x1000 bytes at 0x40008000
DEBUG:   BAR4: allocated 0x4000 bytes at 0x4000c000 (64-bit)
DEBUG: Device features: Features(CTRL_GUEST_OFFLOADS | MAC | MRG_RXBUF | STATUS | CTRL_VQ | CTRL_RX | CTRL_VLAN | CTRL_RX_EXTRA | GUEST_ANNOUNCE | CTL_MAC_ADDR | RING_INDIRECT_DESC | RING_EVENT_IDX | VERSION_1)
INFO: negotiated_features Features(MAC | STATUS | RING_INDIRECT_DESC | RING_EVENT_IDX)
DEBUG: Got MAC=[52, 54, 00, 12, 34, 56], status=Status(1)
[INFO] [ostd::bus::device_manager] registered device: virtio-net (idx 1)
INFO: VirtIO bus init complete
[TRACE] [aster_nix] --> kernel_main[1] stage="initialization"
[INFO] [aster_nix]   开始执行内核主函数
[DEBUG] [aster_nix]   追踪系统已初始化
[INFO] [aster_nix]   内核主函数完成设置，BSP 进入空闲循环
[DEBUG] [aster_nix]   注册 AP 入口函数
[INFO] [aster_nix]   CPU 运行 inter_processor_call, cpu_id=0
INFO: core 0 initialized task scheduler
INFO: started kernel main loop
DEBUG: core 0 stole 1 tasks
[INFO] [vfs::impls::ext4_fs::provider]   Mounting ext4 with readonly = false
DEBUG: Load Ext4 Superblock: SuperBlock { inode_count: 262144, block_count_lo: 1048576, reserved_block_count_lo: 52428, free_block_count_lo: 171367, free_inode_count: 255709, first_data_block: 0, log_block_size: 2, log_cluster_size: 2, blocks_per_group: 32768, frags_per_group: 32768, inodes_per_group: 8192, mount_time: 1749914719, write_time: 1749914723, mount_count: 1, max_mount_count: 65535, magic: 61267, state: 1, errors: 1, minor_rev_level: 0, last_check_time: 1749914719, check_interval: 0, creator_os: 0, rev_level: 1, def_resuid: 0, def_resgid: 0, first_inode: 11, inode_size: 256, block_group_index: 0, features_compatible: 60, features_incompatible: 706, features_read_only: 1131, uuid: [117, 20, 245, 228, 137, 226, 66, 35, 183, 143, 112, 231, 24, 201, 172, 246], volume_name: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], last_mounted: [47, 99, 111, 100, 101, 47, 109, 110, 116, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], algorithm_usage_bitmap: 0, s_prealloc_blocks: 0, s_prealloc_dir_blocks: 0, s_reserved_gdt_blocks: 511, journal_uuid: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], journal_inode_number: 8, journal_dev: 0, last_orphan: 0, hash_seed: [299437637, 575368757, 3462722985, 879302278], default_hash_version: 1, journal_backup_type: 1, desc_size: 64, default_mount_opts: 12, first_meta_bg: 0, mkfs_time: 1749914719, journal_blocks: [127754, 4, 0, 0, 16384, 491520, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 67108864], block_count_hi: 0, reserved_blocks_count_hi: 0, free_blocks_count_hi: 0, min_extra_isize: 32, want_extra_isize: 32, flags: 1, raid_stride: 0, mmp_interval: 0, mmp_block: 0, raid_stripe_width: 0, log_groups_per_flex: 4, checksum_type: 1, reserved_pad: 0, kbytes_written: 3367145, snapshot_inum: 0, snapshot_id: 0, snapshot_r_blocks_count: 0, snapshot_list: 0, error_count: 0, first_error_time: 0, first_error_ino: 0, first_error_block: 0, first_error_func: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], first_error_line: 0, last_error_time: 0, last_error_ino: 0, last_error_line: 0, last_error_block: 0, last_error_func: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], mount_opts: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], usr_quota_inum: 0, grp_quota_inum: 0, overhead_clusters: 36936, backup_bgs: [0, 0], encrypt_algos: [0, 0, 0, 0], encrypt_pw_salt: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], lpf_ino: 0, padding: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], checksum: 3453743519 }
#### OS COMP TEST GROUP START basic-glibc ####
Testing brk :
[INFO] [aster_nix::thread]   开始创建用户任务
TRACE: Dir find entry: dir 2, name glibc
TRACE: Dir find entry: dir 131073, name basic
TRACE: Dir find entry: dir 131081, name brk
[INFO] [aster_nix::thread]   创建用户上下文完成，入口点: 0x1000
[INFO] [aster_nix::thread]   构建用户任务
[INFO] [aster_nix::thread]   创建用户任务完成，准备运行
[INFO] [ostd::mm::vm_space]   root: 0x807a9000
[INFO] [ostd::mm::vm_space]   MAX_USERSPACE_VADDR: 0x7ffffffff000
[INFO] [ostd::mm::vm_space]   -------------USERSPACE-------------------
[dump_page_table] start=0x0, end=0x7ffffffff000, root_paddr=0x807a9000
L4[000] VA=0x00000000000000 → PA=0x00000000000000 PageProperty { flags: R | X | RX | ACCESSED, cache: Uncacheable, priv_flags: KERNEL }
  L3[000] VA=0x00000000000000 → PA=0x003d4c4c454000 PageProperty { flags: ACCESSED | DIRTY, cache: Writeback, priv_flags: GLOBAL }
Panicked at /home/xmin/study/os/national_competition/NexusOS/ostd/src/arch/loongarch/trap/mod.rs:40
Non-resettable panic! PanicInfo {
    message: Cannot handle kernel cpu exception: LoadPageFault. Trapframe: 
    TrapFrame {
        general: GeneralRegs {
            zero: 0xffffbd4c4c454000,
            ra: 0xffffffff801ad10c,
            tp: 0x0,
            sp: 0xffffffff80686ef0,
            a0: 0xffffbd4c4c454000,
            a1: 0x7,
            a2: 0x3333333333333333,
            a3: 0x0,
            a4: 0x7ffffffff000,
            a5: 0x4,
            a6: 0xffffffff804bb000,
            a7: 0xffffffff804bafe0,
            t0: 0x0,
            t1: 0x5,
            t2: 0xffffffff804bafd8,
            t3: 0xffffffff804bafb8,
            t4: 0xffffffff8068774d,
            t5: 0x5,
            t6: 0xffffffff804bafac,
            t7: 0xffffffff80686948,
            t8: 0xffffffff804a7dd8,
            r21: 0xffffffff8064c100,
            fp: 0x0,
            s0: 0x0,
            s1: 0x0,
            s2: 0x0,
            s3: 0x0,
            s4: 0x0,
            s5: 0x0,
            s6: 0x0,
            s7: 0x0,
            s8: 0x0,
        },
        prmd: 0x0,
        era: 0xffffffff801ad0e4,
        badv: 0xffffbd4c4c454000,
    }.,
    location: Location {
        file: "/home/xmin/study/os/national_competition/NexusOS/ostd/src/arch/loongarch/trap/mod.rs",
        line: 40,
        col: 13,
    },
    can_unwind: true,
    force_no_backtrace: false,
}
Printing stack trace (manual unwind for LoongArch):
    (empty stack)
