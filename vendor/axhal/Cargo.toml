# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

[package]
edition = "2024"
name = "axhal"
version = "0.1.0"
authors = ["Yuekai Jia <equation618@gmail.com>"]
build = "build.rs"
autolib = false
autobins = false
autoexamples = false
autotests = false
autobenches = false
description = "ArceOS hardware abstraction layer, provides unified APIs for platform-specific operations"
homepage = "https://github.com/arceos-org/arceos"
documentation = "https://arceos-org.github.io/arceos/axhal/index.html"
readme = false
license = "GPL-3.0-or-later OR Apache-2.0 OR MulanPSL-2.0"
repository = "https://github.com/arceos-org/arceos/tree/main/modules/axhal"

[features]
alloc = []
default = []
fp_simd = []
irq = []
paging = ["axalloc"]
rtc = [
    "x86_rtc",
    "riscv_goldfish",
    "arm_pl031",
]
smp = []
tls = ["alloc"]
uspace = ["paging"]

[lib]
name = "axhal"
path = "src/lib.rs"

[dependencies]
bitflags = "2.9"
cfg-if = "1.0"
handler_table = "0.1"
int_ratio = "0.1.1"
kernel_guard = "0.1"
kspin = "0.1"
lazyinit = "0.2"
linkme = "0.3.33"
log = "=0.4.21"
memory_addr = "0.3"
page_table_entry = "0.5"
page_table_multiarch = "0.5"
percpu = "0.2"
static_assertions = "1.1.0"

[dependencies.axalloc]
path = "../axalloc"
optional = true

[dependencies.axconfig]
path = "../axconfig"

[dependencies.axlog]
path = "../axlog"

[build-dependencies.axconfig]
path = "../axconfig"

[target.'cfg(any(target_arch = "riscv32", target_arch = "riscv64"))'.dependencies]
riscv = "0.13"

[target.'cfg(any(target_arch = "riscv32", target_arch = "riscv64"))'.dependencies.riscv_goldfish]
version = "0.1"
optional = true

[target.'cfg(any(target_arch = "riscv32", target_arch = "riscv64"))'.dependencies.sbi-rt]
version = "0.0.3"
features = ["legacy"]

[target.'cfg(target_arch = "aarch64")'.dependencies]
aarch64-cpu = "10.0"
arm_gicv2 = "0.1"
arm_pl011 = "0.1"
dw_apb_uart = "0.1"
tock-registers = "0.9"

[target.'cfg(target_arch = "aarch64")'.dependencies.arm_pl031]
version = "0.2"
optional = true

[target.'cfg(target_arch = "loongarch64")'.dependencies]
loongArch64 = "0.2.5"
ns16550a = "0.5.0"

[target.'cfg(target_arch = "x86_64")'.dependencies]
raw-cpuid = "11.5"
x2apic = "0.4"
x86 = "0.52"
x86_64 = "0.15"

[target.'cfg(target_arch = "x86_64")'.dependencies.x86_rtc]
version = "0.1"
optional = true
