# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

[package]
edition = "2024"
name = "axtask"
version = "0.1.0"
authors = ["Yuekai Jia <equation618@gmail.com>"]
build = false
autolib = false
autobins = false
autoexamples = false
autotests = false
autobenches = false
description = "ArceOS task management module"
homepage = "https://github.com/arceos-org/arceos"
documentation = "https://arceos-org.github.io/arceos/axtask/index.html"
readme = false
license = "GPL-3.0-or-later OR Apache-2.0 OR MulanPSL-2.0"
repository = "https://github.com/arceos-org/arceos/tree/main/modules/axtask"

[features]
default = []
irq = []
multitask = [
    "dep:axconfig",
    "dep:percpu",
    "dep:kspin",
    "dep:lazyinit",
    "dep:memory_addr",
    "dep:scheduler",
    "dep:timer_list",
    "kernel_guard",
    "dep:crate_interface",
    "dep:cpumask",
]
preempt = [
    "irq",
    "percpu?/preempt",
    "kernel_guard/preempt",
]
sched_cfs = [
    "multitask",
    "preempt",
]
sched_fifo = ["multitask"]
sched_rr = [
    "multitask",
    "preempt",
]
smp = ["kspin/smp"]
test = ["percpu?/sp-naive"]
tls = ["axhal/tls"]

[lib]
name = "axtask"
path = "src/lib.rs"

[dependencies]
cfg-if = "1.0"
log = "=0.4.21"

[dependencies.axconfig]
path = "../axconfig"
optional = true

[dependencies.axhal]
path = "../axhal"

[dependencies.cpumask]
version = "0.1"
optional = true

[dependencies.crate_interface]
version = "0.1"
optional = true

[dependencies.kernel_guard]
version = "0.1"
optional = true

[dependencies.kspin]
version = "0.1"
optional = true

[dependencies.lazyinit]
version = "0.2"
optional = true

[dependencies.memory_addr]
version = "0.3"
optional = true

[dependencies.percpu]
version = "0.2"
optional = true

[dependencies.scheduler]
git = "https://github.com/arceos-org/scheduler.git"
tag = "v0.1.0"
optional = true

[dependencies.timer_list]
version = "0.1"
optional = true

[dev-dependencies]
rand = "0.9"

[dev-dependencies.axhal]
path = "../axhal"
features = ["fp_simd"]

[dev-dependencies.axtask]
path = ""
features = [
    "test",
    "multitask",
]
